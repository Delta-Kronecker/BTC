name: Daily Bitcoin AI Prediction

on:
  # Ø§Ø¬Ø±Ø§ Ø¨Ù‡ ØµÙˆØ±Øª Ø®ÙˆØ¯Ú©Ø§Ø± Ù‡Ø± Ø±ÙˆØ² Ø³Ø§Ø¹Øª 00:00 UTC
  schedule:
    - cron: '0 0 * * *'
  # Ø¯Ú©Ù…Ù‡ Ø§Ø¬Ø±Ø§ÛŒ Ø¯Ø³ØªÛŒ Ø¨Ø±Ø§ÛŒ ØªØ³Øª ÙÙˆØ±ÛŒ
  workflow_dispatch:

# Ù…Ø¬ÙˆØ² Ø¯Ø§Ø¯Ù† Ø¨Ù‡ Ø±Ø¨Ø§Øª Ø¨Ø±Ø§ÛŒ Ø°Ø®ÛŒØ±Ù‡ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ Ø¯Ø± Ú¯ÛŒØªâ€ŒÙ‡Ø§Ø¨
permissions:
  contents: write

jobs:
  run-bot:
    runs-on: ubuntu-latest

    steps:
    # 1. Ø¯Ø±ÛŒØ§ÙØª Ú©Ø¯Ù‡Ø§ Ø§Ø² Ù…Ø®Ø²Ù†
    - name: Checkout repository
      uses: actions/checkout@v4

    # 2. Ù†ØµØ¨ Ù¾Ø§ÛŒØªÙˆÙ† 3.10 (Ù¾Ø§ÛŒØ¯Ø§Ø±ØªØ±ÛŒÙ† Ù†Ø³Ø®Ù‡ Ø¨Ø±Ø§ÛŒ ØªÙ†Ø³ÙˆØ±ÙÙ„Ùˆ)
    - name: Set up Python
      uses: actions/setup-python@v5
      with:
        python-version: '3.10'

    # 3. Ù†ØµØ¨ Ù…Ø³ØªÙ‚ÛŒÙ… Ù¾Ú©ÛŒØ¬â€ŒÙ‡Ø§ (Ø¨Ø¯ÙˆÙ† Ù†ÛŒØ§Ø² Ø¨Ù‡ requirements.txt)
    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
        pip install numpy pandas yfinance requests scikit-learn tensorflow-cpu

    # 4. Ø³Ø§Ø®Øª Ù¾ÙˆØ´Ù‡â€ŒÙ‡Ø§ÛŒ Ù…ÙˆØ±Ø¯ Ù†ÛŒØ§Ø² (Ù…Ø­Ø¶ Ø§Ø·Ù…ÛŒÙ†Ø§Ù†)
    - name: Create directories
      run: |
        mkdir -p data
        mkdir -p models

    # 5. Ø§Ø¬Ø±Ø§ÛŒ Ù…Ø¯Ù„ (ÙØ±Ø¶ Ø¨Ø± Ø§ÛŒÙ† Ø§Ø³Øª Ú©Ù‡ Ù†Ø§Ù… ÙØ§ÛŒÙ„ main.py Ø§Ø³Øª)
    - name: Run AI Model
      env:
        TF_ENABLE_ONEDNN_OPTS: 0
      run: |
        python main.py

    # 6. Ø°Ø®ÛŒØ±Ù‡ Ùˆ Ø¢Ù¾Ù„ÙˆØ¯ Ù†ØªØ§ÛŒØ¬ (Ø¯ÛŒØªØ§Ø¨ÛŒØ³ØŒ Ù…Ø¯Ù„ Ùˆ Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯)
    - name: Commit and Push changes
      uses: stefanzweifel/git-auto-commit-action@v5
      with:
        commit_message: "ğŸ¤– AI Update: New Prediction & Data"
        # ÙÙ‚Ø· ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ ØªØºÛŒÛŒØ± ÛŒØ§ÙØªÙ‡ Ø¯Ø± Ø§ÛŒÙ† Ù…Ø³ÛŒØ±Ù‡Ø§ Ø±Ø§ Ø°Ø®ÛŒØ±Ù‡ Ú©Ù†
        file_pattern: 'data/* models/* README.md'
